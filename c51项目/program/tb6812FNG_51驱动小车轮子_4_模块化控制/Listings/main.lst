C51 COMPILER V9.54   MAIN                                                                  02/16/2023 23:16:31 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\hex\main.obj
COMPILER INVOKED BY: D:\software\keil5\C51\BIN\C51.EXE code\main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\L
                    -istings\main.lst) OBJECT(.\Objects\hex\main.obj)

line level    source

   1          #include "the_auto_turn_where.h"
   2          #include <REGX52.H>
   3          #include "c51tangsang.h"
   4          
   5          sbit PWM_left_behind = P3^0; //PWM1
   6          sbit STBY_left = P3^1;           //芯片工作状态
   7          sbit IN1_left_behind = P3^2; //IN1
   8          sbit IN2_left_behind = P3^3; //IN2
   9          // 右后方轮子
  10          sbit PWM_right_behind = P2^0; //PWM2
  11          sbit STBY_right = P2^1;          //芯片工作状态2
  12          sbit IN1_right_behind = P2^3; //IN1_2
  13          sbit IN2_right_behind = P2^2; //IN2_2
  14          // 左前方轮子
  15          sbit PWM_left_front = P0^2; //PWM3
  16          //sbit STBY_right = P2^1;                //芯片工作状态2
  17          sbit IN1_left_front = P0^0; //IN1_2
  18          sbit IN2_left_front = P0^1; //IN2_2
  19          // 右前方轮子
  20          sbit PWM_right_front = P2^6; //PWM4
  21          //sbit STBY_right = P2^1;                //芯片工作状态2
  22          sbit IN1_right_front = P2^4; //IN1_2
  23          sbit IN2_right_front = P2^5; //IN2_2
  24          
  25          //pwm功率系数100、计时器
  26          
  27          unsigned char State_what_to_do_now;
  28          enum State_What_To_Do_Now{goalong=1,goback,turnleft,turnright,goleft,goright}state_whattodo;
  29          
  30          //电机功率系数1=100；
  31          unsigned char compare1=20;
  32          unsigned int conter1=0,compare_turn_state=500;
  33          //根基小车的固定路径，计算出规则进行设计路线，不可进行路径临时改变
  34          void work_use_time(void);
  35          
  36          int main ()
  37          {
  38   1              //time_0_init()
  39   1              time_0_ms_init();
  40   1              
  41   1              //四个电机八个控制位全部置1初始化刹车
  42   1              IN1_right_front = State_In1_left_front;
  43   1              IN1_right_behind = State_In1_left_behind;
  44   1              IN1_left_front = State_In1_right_front;
  45   1              IN1_left_behind = State_In1_right_behind;
  46   1              IN2_right_front = State_In2_left_front;
  47   1              IN2_right_behind = State_In2_left_behind;
  48   1              IN2_left_front = State_In2_right_front;
  49   1              IN2_left_behind = State_In2_right_behind;
  50   1              
  51   1              //电机给电
  52   1              PWM_right_behind=1;
  53   1              PWM_right_front = 1;
  54   1              PWM_left_behind=1;
C51 COMPILER V9.54   MAIN                                                                  02/16/2023 23:16:31 PAGE 2   

  55   1              PWM_left_front = 1;
  56   1              
  57   1              //芯片使能
  58   1              STBY_left = 1;
  59   1              STBY_right=1;
  60   1              
  61   1              while(1)
  62   1              {
  63   2                      //正转
  64   2      //              STBY_left = 1; //电机驱动芯片开始工作
  65   2      //              PWM_left_behind =1; //pwm输入，可以直接全功率输入---->置1
  66   2      //              //电机旋转方向------>正反转
  67   2      //              //00------->自由停车
  68   2      //              //10------->正转
  69   2      //              //01------->反转
  70   2      //              //11------->刹车
  71   2              }
  72   1      }
  73          
  74          void work_use_time(void) interrupt 1
  75          {
  76   1              TH0=64535/256;//高八位数据     晶振12mhz，一个周期为1ms，最大65535us，
  77   1              TL0=64535%256;//低八位数据->64535 = 65535-1000; -> 1000us=1ms; 定时器单位为1ms
  78   1              conter1++;
  79   1              conter1%=1000;
  80   1              if(conter1<compare_turn_state)
  81   1              {
  82   2                      go_along();
  83   2                      IN1_right_front = State_In1_left_front;
  84   2                      IN1_right_behind = State_In1_left_behind;
  85   2                      IN1_left_front = State_In1_right_front;
  86   2                      IN1_left_behind = State_In1_right_behind;
  87   2                      IN2_right_front = State_In2_left_front;
  88   2                      IN2_right_behind = State_In2_left_behind;
  89   2                      IN2_left_front = State_In2_right_front;
  90   2                      IN2_left_behind = State_In2_right_behind;
  91   2              }
  92   1              else
  93   1              {
  94   2                      go_back();
  95   2                      IN1_right_front = State_In1_left_front;
  96   2                      IN1_right_behind = State_In1_left_behind;
  97   2                      IN1_left_front = State_In1_right_front;
  98   2                      IN1_left_behind = State_In1_right_behind;
  99   2                      IN2_right_front = State_In2_left_front;
 100   2                      IN2_right_behind = State_In2_left_behind;
 101   2                      IN2_left_front = State_In2_right_front;
 102   2                      IN2_left_behind = State_In2_right_behind;
 103   2              }       
 104   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    216    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      7    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
