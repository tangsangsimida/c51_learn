C51 COMPILER V9.54   C51TANGSANG                                                           11/12/2022 12:58:17 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE C51TANGSANG
OBJECT MODULE PLACED IN .\Objects\hex\c51tangsang.obj
COMPILER INVOKED BY: D:\software\keil5\C51\BIN\C51.EXE Objects\code\c51tangsang.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTE
                    -XTEND PRINT(.\Listings\c51tangsang.lst) TABS(2) OBJECT(.\Objects\hex\c51tangsang.obj)

line level    source

   1          
   2          #include "c51tangsang.h"
   3          
   4          /*
   5           *¸Ã¿âÎªtangsangÇ×ÊÖ´òÔì£¬ÈË¹¤´òÔì£¬±È½Ï´Ö²Ú£¬¹¦ÄÜÇ·È±»òè¦´Ã£¬½öÌá¹©Ñ§Ï°²Î¿¼ 
   6           *¸Ã¿âÎªtangsangÇ×ÊÖ´òÔì£¬ÈË¹¤´òÔì£¬±È½Ï´Ö²Ú£¬¹¦ÄÜÇ·È±»òè¦´Ã£¬½öÌá¹©Ñ§Ï°²Î¿¼ 
   7           *¸Ã¿âÎªtangsangÇ×ÊÖ´òÔì£¬ÈË¹¤´òÔì£¬±È½Ï´Ö²Ú£¬¹¦ÄÜÇ·È±»òè¦´Ã£¬½öÌá¹©Ñ§Ï°²Î¿¼ 
   8           */
   9          
  10          
  11          
  12          //ÑÓÊ±º¯Êı
  13          //unsigned int ms²ÎÊıµ¥Î»ºÁÃë 
  14          void delay(unsigned int ms)
  15          {
  16   1        unsigned char i, j;
  17   1        while(ms--)
  18   1        { 
  19   2          i = 12;
  20   2          j = 169;
  21   2          do
  22   2          {
  23   3            while (--j);
  24   3          } while (--i);
  25   2        }
  26   1      }
  27          //°ËÎ»ÊıÂë¹ÜÖ¸¶¨Î»ÖÃÏÔÊ¾Êı×Ö
  28          //ºóÆÚ¿ÉÀ©Õ¹ÎªÖÇÄÜÏÔÊ¾×ÖÄ¸»òÊı×Ö£¬or DIYÏÔÊ¾ 
  29          void show_digital(unsigned int th,unsigned int digital)
  30          {
  31   1        //¸øÒ»¸öÊı×é´æ·ÅÄÜ¹»ÏÔÊ¾µÄËùÓĞÊı×Ö£¬ºóÆÚ¸ø×ÖÄ¸»»Ò»¸ö±í´æ·Å
  32   1        //´Ë´¦´æÔÚÄÚ´æÔ½½çµÄÇé¿ö£¬Ó¦ÅĞ¶Ï´«ÈëµÄ²ÎÊıÊÇ·ñÔÚ¹æ¶¨ÊıÂë¹ÜÊıÁ¿ÄÚ£¬³¬³öÔòÏÔÊ¾¹æ¶¨ÄÚÈİ£¬Ö÷ÒªÊÇ³ÌĞòÔ±×Ô¼ºµ÷Ê
             -Ô³ÌĞòµÄÊ±ºò»á³öÏÖÏÂ±êÔ½½ç
  33   1        //ºóÆÚÒ²¿ÉÒÔÍ¨¹ı°´Å¥ÊµÏÖÊıÂë¹ÜÏÔÊ¾ÏàÓ¦µÄÄÚÈİ
  34   1        //»òÕßÍ¨¹ı°´Å¥ÏÔÊ¾Ïà¶ÔÓ¦µÄÊı×Ö 
  35   1        //0-9 
  36   1        unsigned char code digital_table[]={0xc0,0xf9,0xa4,0xb0, 
  37   1                                            0x99,0x92,0x82,0xf8,  
  38   1                                            0x80,0x90,0x88,0x83, 
  39   1                                            0xc6,0xa1,0x86,0x8e};
  40   1        switch(th)
  41   1        {                                   //    P2_4 P2_3 P2_2
  42   2          case 8:P2_2=0;P2_3=0;P2_4=0;break;// 1. 1     1     1
  43   2          case 4:P2_2=0;P2_3=0;P2_4=1;break;// 2. 1     1     0
  44   2          case 6:P2_2=0;P2_3=1;P2_4=0;break;// 3. 1     0     1
  45   2          case 2:P2_2=0;P2_3=1;P2_4=1;break;// 4. 1     0     0
  46   2          case 7:P2_2=1;P2_3=0;P2_4=0;break;// 5. 0     1     1
  47   2          case 3:P2_2=1;P2_3=0;P2_4=1;break;// 6. 0     1     0
  48   2          case 5:P2_2=1;P2_3=1;P2_4=0;break;// 7. 0     0     1
  49   2          case 1:P2_2=1;P2_3=1;P2_4=1;break;// 8. 0     0     0
  50   2          //Ä¬ÈÏÔİÊ±ÏÈÓÃ1´úÌæ
  51   2          default:P2_2=0;P2_3=0;P2_4=0;P0=digital_table[digital];
  52   2        }
  53   1        //ÉÏÃæµÄ×ÖÂëÊÇ¹²Ñô¼«µÄ£¬ËùÒÔÖ±½ÓÈ¡·´£¬ÀÁµÃĞ´×ÖÂë£¬Ö±½Ó°Ù¶ÈµÄ£¬½á¹û·¢ÏÖÊÇ¹²Ñô¼« µÄ£¬³±¡£
C51 COMPILER V9.54   C51TANGSANG                                                           11/12/2022 12:58:17 PAGE 2   

  54   1        P0=~digital_table[digital];
  55   1        delay(1);
  56   1        //Ïû¸ö¶¶
  57   1        
  58   1      }
  59          
  60          static void write_byte(unsigned char byte)
  61          {
  62   1        unsigned char i;
  63   1        //°ÑÊı¾İ·Å½ø¼Ä´æÆ÷£¬¼Ä´æÆ÷Îª²»¿ÉÎ»²Ù×÷¼Ä´æÆ÷ÀûÓÃ& |Ñ¹Õ»Ê½¸³Öµ
  64   1        for(i=0;i<8;i++)
  65   1        {
  66   2          //°Ñ×î¸ßÎ»È¡³öÀ´
  67   2          SER =byte>>7;
  68   2          byte<<=1;
  69   2          //Ê±ÖÓºÍrck¸Ã¸´Ï°ÁË
  70   2          SRCK =0;
  71   2          SRCK =1;
  72   2        }
  73   1        //ĞèÒªÒ»¸öÉÏÉıÑØ²ÅÄÜ´«ÈëÊı¾İ
  74   1        RCK =1;
  75   1        //´«ÈëÊı¾İºóÈÃio±£³ÖµÍµçÆ½£¬ÎªÏÂÒ»´Î´«ÈëÊı¾İ×ö×¼±¸(ÏÂÒ»´ÎÉÏÉıÑØ)
  76   1        RCK =0;
  77   1      }
  78          
  79          
  80          void show_clum(unsigned char clum,unsigned char Data)
  81          {
  82   1        write_byte(Data);
  83   1        P0=~(0x80>>(clum-1));
  84   1        //ÁĞÎª¹²Òõ¼«¸ø0Ñ¡ÖĞ
  85   1      }
  86          
  87          //¶¨Ê±Æ÷³õÊ¼»¯
  88          void time_init()
  89          {
  90   1        //TMOD = 0x01;//¹¤×÷Ä£Ê½£¬²»¿ÉÎ»Ñ°Ö·£¬Ã¿Ò»¸öÎ»¶¼ÓĞÏàÓ¦µÄº¬Òå£¬
  91   1        TMOD&=0xF0;//ÉÏÃæµÄĞ´·¨¿ÉÄÜ´æÔÚÓëÁíÒ»¸ö¶¨Ê±Æ÷³åÍ»µÄÇé¿ö£»
  92   1        TMOD|=0x01;//ÓÃ&|µÄ·½Ê½¸³Öµ²»»áÓ°ÏìÁíÒ»¸ö¶¨Ê±Æ÷µÄÔËĞĞ
  93   1        TF0=0;//Ä¬ÈÏÓ¦¸ÃÊÇ0²»ÅäÖÃ²»Ó°Ïì£¬±ÜÃâÒ»¿ªÊ¼¾Í²úÉúÖĞ¶Ï;
  94   1        TH0=64535/256;//¸ß°ËÎ»Êı¾İ     ¾§Õñ12mhz£¬Ò»¸öÖÜÆÚÎª1us£¬×î´ó65535us£¬
  95   1        TL0=64535%256;//µÍ°ËÎ»Êı¾İ->64535 = 65535-1000; -> 1000us=1ms; ¶¨Ê±Æ÷µ¥Î»Îª1ms
  96   1        ET0=1;//Èı¸öÖĞ¶ÏÏµÍ³µÄ½Ó¿Ú
  97   1        EA=1;
  98   1        PT0=0;
  99   1        TR0=1; //¶¨Ê±Æ÷0µÄÔËĞĞ¿ØÖÆÎ»
 100   1      }
 101          
 102          //·äÃùÆ÷x-msÆµÂÊ
 103          void Buzzer_on(uint ms)
 104          {
 105   1        for(;ms>=0;ms--)
 106   1        {
 107   2          Buzzer=!Buzzer;
 108   2          delay(1);
 109   2        }
 110   1      } 


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    266    ----
   CONSTANT SIZE    =     16    ----
C51 COMPILER V9.54   C51TANGSANG                                                           11/12/2022 12:58:17 PAGE 3   

   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
